<div class="row-fluid">
  <div class="span12">
    <h1>Upcoming events</h1>

    <table class="table table-striped table-bordered table-condensed">
      <tr>
        <th>Title</th>
        <th>Date</th>
        <th>Time</th>
        <th>Location</th>
        <th>RSVP</th>
      </tr>

      <% if @events.empty? %>
          <tr>
            <td colspan="5">There are no events.</td>
          </tr>
      <% end %>
      <% @events.find_each do |event| %>
          <tr>
            <%= render 'event', event: event %>
            <td>
              <% if user_signed_in? && (event.organizer?(current_user) || current_user.admin?) %>
                  <div><%= link_to 'Organizer Console', organize_event_path(event), :class => 'btn' %></div>
              <% end %>
              <%= render 'shared/rsvp_actions', event: event %>
            </td>
          </tr>
      <% end %>
    </table>

    <h1>Past events</h1>
    <table class="<%= if @past_events.any? then
                        'datatable-sorted'
                      else
                        ''
                      end %> table table-striped table-bordered table-condensed">
      <thead>
      <tr>
        <th>Title</th>
        <th>Date</th>
        <th>Time</th>
        <th>Location</th>
      </tr>
      </thead>

      <tbody>
      <% if @past_events.empty? %>
          <tr>
            <td colspan="5">There are no past events.</td>
          </tr>
      <% end %>
      <% @past_events.find_each do |event| %>
          <tr><%= render 'event', event: event %></tr>
      <% end %>
      </tbody>
    </table>

    <% if user_signed_in? %>
        <%= render 'shared/actions', links: [
                ['Organize Event', new_event_path],
                ['Manage Locations', locations_path]
        ] %>
    <% end %>

  </div>
</div>